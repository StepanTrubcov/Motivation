const achievementsController = {
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ (–∑–∞–≥–ª—É—à–∫–∞ - –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å AI)
  generateReport: async (req, res) => {
    try {
      const { telegramId } = req.params;
      const { goalsDone, goalsInProgress } = req.body;

      // –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞
      const message = `
üéØ –í–∞—à –æ—Ç—á—ë—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è:

‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ü–µ–ª–µ–π: ${goalsDone?.length || 0}
üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ: ${goalsInProgress?.length || 0}

–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! üí™
      `.trim();

      res.status(200).json({
        success: true,
        message,
        telegramId
      });
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞:', error);
      res.status(500).json({ success: false, message: '–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞' });
    }
  },

  // –°–æ–∑–¥–∞–Ω–∏–µ share-–∫–∞—Ä—Ç–æ—á–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–∑–∞–≥–ª—É—à–∫–∞)
  createShareImage: async (req, res) => {
    try {
      const { title, description, image, points, username } = req.body;

      // –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      // –ü–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ—Å—Ç–æ URL —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      const shareUrl = image || 'https://via.placeholder.com/600x400';

      res.status(200).json({
        success: true,
        url: shareUrl,
        title,
        username
      });
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è share-–∫–∞—Ä—Ç–æ—á–∫–∏:', error);
      res.status(500).json({ success: false, message: '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏' });
    }
  }
};

module.exports = achievementsController;
